{
  "orangelight": [
    {
      "created_at": "2022-12-28T13:42:09",
      "updated_at": "2022-12-28T13:42:09",
      "html_url": "https://github.com/pulibrary/orangelight/pull/3324",
      "number": 3324,
      "pull_request_html_url": "https://github.com/pulibrary/orangelight/pull/3324",
      "repository_html_url": "https://github.com/pulibrary/orangelight",
      "repository_name": "orangelight",
      "state": "open",
      "title": "[WIP] Increase cpu and ram in docker container - update capybara selenium configuration",
      "user_name": "Christina Chortaria",
      "comments": [
        {
          "user_name": "Coveralls",
          "updated_at": "2022-12-28T17:08:10",
          "html_url": "https://github.com/pulibrary/orangelight/pull/3324#issuecomment-1366688019",
          "body": "\n[![Coverage Status](https://coveralls.io/builds/55500298/badge)](https://coveralls.io/builds/55500298)\n\nCoverage: 94.533%. Remained the same when pulling **1eeb5852053d8ffdbba562049c616c909265c257 on cpu-circleci** into **8e0010d5041f7829892c41bee2d6a931e409b5b6 on main**.\n"
        }
      ],
      "events": [
        {
          "actor_name": "Christina Chortaria",
          "created_at": "2022-12-28T14:11:34",
          "type": "renamed"
        },
        {
          "actor_name": "Christina Chortaria",
          "created_at": "2022-12-28T16:46:39",
          "type": "head_ref_force_pushed"
        },
        {
          "actor_name": "Christina Chortaria",
          "created_at": "2022-12-28T16:58:02",
          "type": "head_ref_force_pushed"
        },
        {
          "actor_name": "Christina Chortaria",
          "created_at": "2022-12-28T17:49:40",
          "type": "renamed"
        },
        {
          "actor_name": "Christina Chortaria",
          "created_at": "2022-12-28T17:50:47",
          "type": "ready_for_review"
        },
        {
          "actor_name": "Christina Chortaria",
          "created_at": "2022-12-28T17:56:01",
          "type": "convert_to_draft"
        },
        {
          "actor_name": "Christina Chortaria",
          "created_at": "2022-12-28T17:56:15",
          "type": "renamed"
        }
      ],
      "pr_html_url": "https://github.com/pulibrary/orangelight/pull/3324",
      "action": "pull_request_open"
    }
  ],
  "pdc_describe": [
    {
      "created_at": "2022-12-23T21:32:50",
      "updated_at": "2022-12-23T21:32:50",
      "html_url": "https://github.com/pulibrary/pdc_describe/pull/800",
      "number": 800,
      "pull_request_html_url": "https://github.com/pulibrary/pdc_describe/pull/800",
      "repository_html_url": "https://github.com/pulibrary/pdc_describe",
      "repository_name": "pdc_describe",
      "state": "closed",
      "title": "Reformat work page with tabular layout / bold labels",
      "user_name": "Chuck McCallum",
      "comments": [],
      "events": [
        {
          "actor_name": "James R. Griffin III",
          "created_at": "2022-12-28T14:28:55",
          "type": "review_requested"
        },
        {
          "actor_name": null,
          "created_at": "2022-12-28T14:29:25",
          "type": "deployed"
        },
        {
          "actor_name": "James R. Griffin III",
          "created_at": "2022-12-28T14:41:10",
          "type": "referenced"
        },
        {
          "actor_name": "James R. Griffin III",
          "created_at": "2022-12-28T14:41:10",
          "type": "merged"
        },
        {
          "actor_name": "James R. Griffin III",
          "created_at": "2022-12-28T14:41:10",
          "type": "closed"
        },
        {
          "actor_name": "James R. Griffin III",
          "created_at": "2022-12-28T14:41:11",
          "type": "head_ref_deleted"
        }
      ],
      "pr_html_url": "https://github.com/pulibrary/pdc_describe/pull/800",
      "action": "pull_request_closed"
    },
    {
      "created_at": "2022-12-14T19:43:32",
      "updated_at": "2022-12-14T19:43:32",
      "html_url": "https://github.com/pulibrary/pdc_describe/issues/746",
      "number": 746,
      "pull_request_html_url": null,
      "repository_html_url": "https://github.com/pulibrary/pdc_describe",
      "repository_name": "pdc_describe",
      "state": "closed",
      "title": "Describe Record: Changes to Rendered Record Appearance (to discuss)",
      "user_name": "Hannah H",
      "comments": [],
      "events": [
        {
          "actor_name": "James R. Griffin III",
          "created_at": "2022-12-28T14:41:11",
          "type": "closed"
        }
      ],
      "pr_html_url": null,
      "action": "closed"
    },
    {
      "created_at": "2022-12-28T15:49:40",
      "updated_at": "2022-12-28T15:49:40",
      "html_url": "https://github.com/pulibrary/pdc_describe/pull/801",
      "number": 801,
      "pull_request_html_url": "https://github.com/pulibrary/pdc_describe/pull/801",
      "repository_html_url": "https://github.com/pulibrary/pdc_describe",
      "repository_name": "pdc_describe",
      "state": "open",
      "title": "Ensuring that Work#approve logs a message indicating that the Work was successfully published by the curator user",
      "user_name": "James R. Griffin III",
      "comments": [],
      "events": [],
      "pr_html_url": "https://github.com/pulibrary/pdc_describe/pull/801",
      "action": "pull_request_open"
    }
  ],
  "princeton_ansible": [
    {
      "created_at": "2022-12-23T15:46:22",
      "updated_at": "2022-12-23T15:46:22",
      "html_url": "https://github.com/pulibrary/princeton_ansible/issues/3577",
      "number": 3577,
      "pull_request_html_url": null,
      "repository_html_url": "https://github.com/pulibrary/princeton_ansible",
      "repository_name": "princeton_ansible",
      "state": "open",
      "title": "[ealapps] URLs that don't end in a slash give \"Something went wrong\" error",
      "user_name": "Jane Sandberg",
      "comments": [
        {
          "user_name": "tventimi",
          "updated_at": "2022-12-28T13:27:13",
          "html_url": "https://github.com/pulibrary/princeton_ansible/issues/3577#issuecomment-1366653565",
          "body": "The error \"Looks like something went wrong!\" no longer occurs, but without the final slash, URLs are still converted to eal-apps-prod and appear that way in the address bar of the browser."
        }
      ],
      "events": [],
      "pr_html_url": null,
      "action": "updated"
    },
    {
      "created_at": "2022-01-06T17:49:14",
      "updated_at": "2022-01-06T17:49:14",
      "html_url": "https://github.com/pulibrary/princeton_ansible/pull/2648",
      "number": 2648,
      "pull_request_html_url": "https://github.com/pulibrary/princeton_ansible/pull/2648",
      "repository_html_url": "https://github.com/pulibrary/princeton_ansible",
      "repository_name": "princeton_ansible",
      "state": "closed",
      "title": "adds variables to manage nginx server hash table",
      "user_name": "Alicia Cozine",
      "comments": [
        {
          "user_name": "Alicia Cozine",
          "updated_at": "2022-12-28T17:47:58",
          "html_url": "https://github.com/pulibrary/princeton_ansible/pull/2648#issuecomment-1366820611",
          "body": "This [documentation](https://nginx.org/en/docs/http/ngx_http_core_module.html#server_names_hash_max_size) says the `server_names_hash_max_size` defaults to `512`, so if we want to increase it we should choose a larger number than that."
        },
        {
          "user_name": "Alicia Cozine",
          "updated_at": "2022-12-28T18:06:36",
          "html_url": "https://github.com/pulibrary/princeton_ansible/pull/2648#issuecomment-1366830691",
          "body": "Closing in favor of #3578.\r\n\r\nThis PR was closed when I deleted my fork of the repo and started pushing my branches directly to the main repo. The branch this PR was built on was on my fork, which no longer exists. "
        }
      ],
      "events": [
        {
          "actor_name": "Alicia Cozine",
          "created_at": "2022-12-28T18:06:37",
          "type": "closed"
        }
      ],
      "pr_html_url": "https://github.com/pulibrary/princeton_ansible/pull/2648",
      "action": "pull_request_closed"
    },
    {
      "created_at": "2022-12-28T18:05:19",
      "updated_at": "2022-12-28T18:05:19",
      "html_url": "https://github.com/pulibrary/princeton_ansible/pull/3578",
      "number": 3578,
      "pull_request_html_url": "https://github.com/pulibrary/princeton_ansible/pull/3578",
      "repository_html_url": "https://github.com/pulibrary/princeton_ansible",
      "repository_name": "princeton_ansible",
      "state": "open",
      "title": "Expand nginx server hash table",
      "user_name": "Alicia Cozine",
      "comments": [
        {
          "user_name": "Alicia Cozine",
          "updated_at": "2022-12-28T18:09:00",
          "html_url": "https://github.com/pulibrary/princeton_ansible/pull/3578#issuecomment-1366831943",
          "body": "Relevant links include:\r\nhttps://nginx.org/en/docs/hash.html\r\nhttps://stackoverflow.com/questions/13895933/nginx-emerg-could-not-build-the-server-names-hash-you-should-increase-server\r\nhttps://serverfault.com/questions/419847/nginx-setting-server-names-hash-max-size-and-server-names-hash-bucket-size"
        }
      ],
      "events": [],
      "pr_html_url": "https://github.com/pulibrary/princeton_ansible/pull/3578",
      "action": "pull_request_open"
    },
    {
      "created_at": "2022-12-28T18:46:14",
      "updated_at": "2022-12-28T18:46:14",
      "html_url": "https://github.com/pulibrary/princeton_ansible/pull/3579",
      "number": 3579,
      "pull_request_html_url": "https://github.com/pulibrary/princeton_ansible/pull/3579",
      "repository_html_url": "https://github.com/pulibrary/princeton_ansible",
      "repository_name": "princeton_ansible",
      "state": "open",
      "title": "Removes postgresql google cloud artifacts",
      "user_name": "Alicia Cozine",
      "comments": [],
      "events": [],
      "pr_html_url": "https://github.com/pulibrary/princeton_ansible/pull/3579",
      "action": "pull_request_open"
    },
    {
      "created_at": "2022-12-28T20:37:33",
      "updated_at": "2022-12-28T20:37:33",
      "html_url": "https://github.com/pulibrary/princeton_ansible/pull/3580",
      "number": 3580,
      "pull_request_html_url": "https://github.com/pulibrary/princeton_ansible/pull/3580",
      "repository_html_url": "https://github.com/pulibrary/princeton_ansible",
      "repository_name": "princeton_ansible",
      "state": "open",
      "title": "Configure sitemap cacheing in nginx for orangelight",
      "user_name": "Alicia Cozine",
      "comments": [],
      "events": [],
      "pr_html_url": "https://github.com/pulibrary/princeton_ansible/pull/3580",
      "action": "pull_request_open"
    },
    {
      "created_at": "2022-11-16T19:14:44",
      "updated_at": "2022-11-16T19:14:44",
      "html_url": "https://github.com/pulibrary/princeton_ansible/issues/3436",
      "number": 3436,
      "pull_request_html_url": null,
      "repository_html_url": "https://github.com/pulibrary/princeton_ansible",
      "repository_name": "princeton_ansible",
      "state": "open",
      "title": "Cache orangelight requests under /sitemap",
      "user_name": "Jane Sandberg",
      "comments": [
        {
          "user_name": "Alicia Cozine",
          "updated_at": "2022-12-28T20:37:47",
          "html_url": "https://github.com/pulibrary/princeton_ansible/issues/3436#issuecomment-1366903896",
          "body": "Looked at https://docs.nginx.com/nginx/admin-guide/content-cache/content-caching/ and https://www.nginx.com/blog/nginx-caching-guide/ for guidance."
        }
      ],
      "events": [],
      "pr_html_url": null,
      "action": "updated"
    },
    {
      "created_at": "2022-09-06T19:25:41",
      "updated_at": "2022-09-06T19:25:41",
      "html_url": "https://github.com/pulibrary/princeton_ansible/issues/3319",
      "number": 3319,
      "pull_request_html_url": null,
      "repository_html_url": "https://github.com/pulibrary/princeton_ansible",
      "repository_name": "princeton_ansible",
      "state": "open",
      "title": "Run nginx -t on the inactive adc before applying a potentially destructive change",
      "user_name": "Jane Sandberg",
      "comments": [
        {
          "user_name": "Alicia Cozine",
          "updated_at": "2022-12-28T21:01:32",
          "html_url": "https://github.com/pulibrary/princeton_ansible/issues/3319#issuecomment-1366913462",
          "body": "See also the documentation in the pul-it-handbook:\r\nhttps://github.com/pulibrary/pul-it-handbook/blob/main/services/nginxplus.md\r\n"
        },
        {
          "user_name": "Alicia Cozine",
          "updated_at": "2022-12-28T21:36:55",
          "html_url": "https://github.com/pulibrary/princeton_ansible/issues/3319#issuecomment-1366927787",
          "body": "Ansible gathers the IP address(es) of all hosts during fact gathering. We can use this to control the logic of the nginxplus playbook. For example, this playbook:\r\n```\r\n- name: test safer nginxplus approach\r\n  hosts: nginxplus_production\r\n  remote_user: pulsys\r\n  strategy: linear\r\n  become: true\r\n  vars_files:\r\n    - ../group_vars/nginxplus/main.yml\r\n  tasks:\r\n    - name: check on IP addresses\r\n      debug: var=ansible_all_ipv4_addresses\r\n\r\n    - name: ping only the inactive VM\r\n      ping:\r\n      when: \"'128.112.203.146' not in ansible_all_ipv4_addresses\"\r\n```\r\nRuns the second task only on the inactive load balancer:\r\n```\r\n% ansible-playbook --ask-vault-password playbooks/nginxplus-test.yml\r\nVault password: \r\n\r\nPLAY [test safer nginxplus approach] ****************************************************************************\r\n\r\nTASK [Gathering Facts] ****************************************************************************\r\nok: [lib-adc2.princeton.edu]\r\nok: [lib-adc1.princeton.edu]\r\n\r\nTASK [check on IP addresses] ****************************************************************************\r\nok: [lib-adc1.princeton.edu] => {\r\n    \"ansible_all_ipv4_addresses\": [\r\n        \"128.112.203.145\",\r\n        \"128.112.203.146\"\r\n    ]\r\n}\r\nok: [lib-adc2.princeton.edu] => {\r\n    \"ansible_all_ipv4_addresses\": [\r\n        \"128.112.203.144\"\r\n    ]\r\n}\r\n\r\nTASK [ping only the inactive VM] ****************************************************************************\r\nskipping: [lib-adc1.princeton.edu]\r\nok: [lib-adc2.princeton.edu]\r\n\r\nPLAY RECAP ****************************************************************************\r\nlib-adc1.princeton.edu     : ok=2    changed=0    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   \r\nlib-adc2.princeton.edu     : ok=3    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   \r\n```\r\nWe could use this logic to ensure the playbook only runs on the inactive VM, and even extend the approach to the full round-trip:\r\n1. Gather facts on all hosts\r\n2. Run the role on the inactive host and reload the new config there\r\n3. Restart the active host to switch which LB is active\r\n4. Gather facts again and confirm the active host has switched (though we need a way to \"remember\" which was which)\r\n5. Run the role on the remaining host and reload the new config there\r\n"
        }
      ],
      "events": [],
      "pr_html_url": null,
      "action": "updated"
    }
  ],
  "pul-it-handbook": [
    {
      "created_at": "2022-12-22T22:16:29",
      "updated_at": "2022-12-22T22:16:29",
      "html_url": "https://github.com/pulibrary/pul-it-handbook/pull/141",
      "number": 141,
      "pull_request_html_url": "https://github.com/pulibrary/pul-it-handbook/pull/141",
      "repository_html_url": "https://github.com/pulibrary/pul-it-handbook",
      "repository_name": "pul-it-handbook",
      "state": "closed",
      "title": "adds details to nginx documentation",
      "user_name": "Alicia Cozine",
      "comments": [],
      "events": [
        {
          "actor_name": "Alicia Cozine",
          "created_at": "2022-12-28T21:00:00",
          "type": "referenced"
        },
        {
          "actor_name": "Alicia Cozine",
          "created_at": "2022-12-28T21:00:00",
          "type": "merged"
        },
        {
          "actor_name": "Alicia Cozine",
          "created_at": "2022-12-28T21:00:00",
          "type": "closed"
        },
        {
          "actor_name": "Alicia Cozine",
          "created_at": "2022-12-28T21:00:01",
          "type": "head_ref_deleted"
        }
      ],
      "pr_html_url": "https://github.com/pulibrary/pul-it-handbook/pull/141",
      "action": "pull_request_closed"
    }
  ],
  "__meta__": {
    "issue_count": 12,
    "closed_count": 1,
    "pull_request_closed_count": 3,
    "pull_request_open_count": 5,
    "updated_count": 3,
    "today": "2022-12-28T22:00:04",
    "yesterday": "2022-12-27T22:00:04"
  }
}